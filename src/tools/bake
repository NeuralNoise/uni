#!/bin/bash
function bake {
  for recipe in $recipes; do
      get_recipe_description=`wget -qO- https://raw.githubusercontent.com/uni-linux/recipes/master/src/$recipe/README.md | grep -P '^[^\|;|\[;|\]]*$' | grep -v '\#\sUsage' | grep -v '\#\sAuthor'`
      get_recipe_author=`wget -qO- https://raw.githubusercontent.com/uni-linux/recipes/master/src/$recipe/README.md | grep -o -P '(?<=\[).*(?=\])'`
      is_available_recipe=`wget -qO- https://raw.githubusercontent.com/uni-linux/recipes/master/src/$recipe/$operating_system/recipe.sh`
      cols=`tput cols`

      if [[ ! -z $is_available_recipe ]]; then

          while (( i <= $cols-1 )); do
                lines+='-'
          (( i = i + 1 ))
          done

          header="$STYLE_DARK_GRAY\n$lines\n$RESET_STYLE"
          header+="#$STYLE_LIGHT_CYAN IT'S TIME TO COOK $RESET_STYLE$recipe!"
          header+="$STYLE_DARK_GRAY\n$lines\n\n$RESET_STYLE"
          header+="$get_recipe_description\n\n"
          header+="$STYLE_CYAN# Author\n\n$RESET_STYLE"
          header+="$get_recipe_author\n\n$STYLE_DARK_GRAY$lines$RESET_STYLE\n\n"

          printf "$header"
          printf "Cooking...\n"
          wget -O uni-recipe.sh https://raw.githubusercontent.com/uni-linux/recipes/master/src/$recipe/$operating_system/recipe.sh -q
          printf "Eating...\n"
          chmod +x uni-recipe.sh
          printf "\n$STYLE_DARK_GRAY$lines$RESET_STYLE\n\n"
          . uni-recipe.sh
          rm -f uni-recipe.sh
          printf "\n$STYLE_DARK_GRAY$lines$STYLE_LIGHT_CYAN\n\nDone. It was delicious!$RESET_STYLE\n\n"
      else
          printf "\nThis recipe doesn't seems to exist.\nPlease, check if you have typed correctly or if it's available for your distribution!\n\n"
      fi
  done
}
